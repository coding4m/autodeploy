---
# tasks file for dnswall
- name: "docker run dnswall-daemon container. "
  docker:
    name: dnswall-daemon
    image: coding4m/dnswall-daemon:latest
    pull: always
    state: reloaded
    restart_policy: always
    ports:
    - "{{docker_bridge_ip}}:53:53/udp"
    - "{{docker_bridge_ip}}:53:53/tcp"
    volumes:
    - /etc/localtime:/etc/localtime
    command: -backend {{ backend }}


- name: "docker run dnswall-agent container. "
  docker:
    name: dnswall-agent
    image: coding4m/dnswall-agent:latest
    pull: always
    state: reloaded
    restart_policy: always
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock:ro
    - /etc/localtime:/etc/localtime
    command: -backend {{ backend }}